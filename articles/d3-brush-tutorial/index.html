<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <title>D3 Brush Tutorial</title>

    <link rel="stylesheet" href="../../lib/bootstrap.min.css">
    <link rel="stylesheet" href="../../index.css">

    <script src="../../lib/d3.min.js"></script>
    <script src="../../lib/marked.min.js"></script>

    <style>
        #contents {
            text-align: justify;
        }
    </style>
</head>
<body>

<div class="container">

    <!-- page header -->
    <div class="row header-row">
        <div class="page-header">
            <div class="row">
                <div class="col-md-1 col-sm-2 header-avatar">
                    <img src="../../img/avatar.png" alt="" class="avatar img-rounded">
                </div>
                <div class="col-md-7 col-sm-6 header-title">
                    <h1>Lucio Paiva</h1>
                    <p>Some of my projects and articles</p>
                </div>
                <div class="col-md-4 col-sm-4 hidden-xs text-right">
                    <div class="row">
                        <div class="col-md-12">
                            <a href="https://github.com/luciopaiva" target="_blank">
                                <img src="../../img/github.png" title="My GitHub page" alt="My GitHub page"></a>
                            <a href="https://stackoverflow.com/users/778272/lucio-paiva" target="_blank">
                                <img src="../../img/stackoverflow.png" title="My Stack Overflow profile" alt="My Stack Overflow profile"></a>
                            <a href="https://www.linkedin.com/in/luciopaiva" target="_blank">
                                <img src="../../img/linkedin.png" title="My LinkedIn profile" alt="My LinkedIn profile"></a>
                        </div>
                    </div>
                    <div class="row header-about">
                        <div class="col-md-12">
                            <a href="../../articles">Articles</a> |
                            <a href="../../projects">Projects</a> |
                            <a href="../../gists">Gists</a> |
                            <a href="../../about">About me</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <p id="contents"></p>
        </div>
    </div>
</div>

<script>
    window.addEventListener('load', () => {
        console.info('Page loaded.');

        d3.text('index.md', (error, data) => {
            if (error) throw error;

            const element = document.getElementById('contents');
            element.innerHTML = marked(data);

            // extracts the first H1 as the page title and the first phrase as the page description
            const pageTitle = element.querySelector('h1').innerText;
            const descriptionResult = element.querySelector('p').innerText.match(/[^.]+/) || [''];

            document.title = pageTitle;
            document.querySelector('meta[name="description"]').setAttribute('content', descriptionResult[0]);
        });
    });
</script>

</body>
</html>
